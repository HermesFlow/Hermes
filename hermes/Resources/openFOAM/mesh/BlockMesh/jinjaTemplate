/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Website:  https://openfoam.org                  |
|   \\  /    A nd           | Version:  10                                    |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    format      ascii;
    class       dictionary;
    location    "system";
    object      blockMeshDict;
}
// ************************************************************************* //

{%- import "openFOAM/utils.jinja"  as utils %}

convertToMeters {{ convertToMeters }};

{# Optional key-value params, like nCells, arcRes, etc. #}
{%- if params %}
{{ utils.handleValue(params) }}
{%- endif %}


vertices
(
    {%- for pnt in vertices %}
    {{ utils.toPoint(pnt) }}
    {%- endfor %}
);


blocks
(
    {%- for blck in blocks %}
    hex {{ utils.toPoint(blck.hex) }}
        {{ utils.toPoint(blck.cellCount) }}
        simpleGrading
        (
            {%- for grd in blck.grading %}
                {%- if grd is string %}
                    {{ grd }}
                {%- elif grd is sequence %}
                    (
                        {%- for dtl in grd %}
                            ({{ dtl.fracDir }} {{ dtl.fracCells }} {{ dtl.expansion }})
                        {%- endfor %}
                    )
                {%- else %}
                    {{ grd }}
                {%- endif %}
            {%- endfor %}
        )
    {%- endfor %}
);


defaultPatch
{
    type {{ defaultPatch }};
}


edges
(
    {%- for edge in edges %}
        {%- if edge.type == "arc" %}
    arc {{ edge.point1 }} {{ edge.point2 }} {{ utils.toPoint(edge.pointM) }}
        {%- endif %}
    {%- endfor %}
);


boundary
(
    {%- for b in boundary %}
    {{ b.name }}
    {
        type {{ b.type }};
        faces
        (
            {%- for f in b.faces %}
                {{ utils.toPoint(f) }}
            {%- endfor %}
        );
        {%- if b.type == "cyclic" and b.neighbourPatch is defined %}
        neighbourPatch {{ b.neighbourPatch }};
        {%- endif %}
    }
    {%- endfor %}
);


mergePatchPairs
(
);
